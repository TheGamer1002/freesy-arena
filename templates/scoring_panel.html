{{/*
  Copyright 2014 Team 254. All Rights Reserved.
  Author: pat@patfairbank.com (Patrick Fairbank)

  UI for entering realtime scores.
*/}}
{{define "title"}}Scoring Panel{{end}}
{{define "body"}}
<div id="matchName">&nbsp;</div>
<div id="currentScore"></div>
<div class="row">
  <div class="column left">
    <div id="manualScore">
      <div justify-content=" flex-start" align-items="left">
        <div id="currentAmpificationCount"></div>
        <div id="ampCount"></div>
        <div id="speakerCount"></div>
      </div>

      <div id="elements">
        <div class="goal-header" >Speaker  
          {{template "goaladd" dict "plus" "S" "icon1" "Auto+"}}
          {{template "2goal" dict "btn1" "O" "icon1" "Auto+" "btn2" "o" "icon2" "Auto-" "count" "autoSpeakerNotes"}}
          {{template "2goal" dict "btn1" "P" "icon1" "Amped+" "btn2" "p" "icon2" "Amped-" "count" "teleopAmplifiedSpeakerNotes"}}
          {{template "2goal" dict "btn1" "I" "icon1" "Teliop+" "btn2" "i" "icon2" "Teliop-" "count" "teleopUnamplifiedSpeakerNotes"}}
        </div>
        <div class="goal-header">AMP
          {{template "goaladd" dict "plus" "A" "icon1" "Sensor"}}
          {{template "2goal" dict "btn1" "U" "icon1" "Auto+" "btn2" "u" "icon2" "Auto-" "count" "autoAmpNotes"}}
          {{template "2goal" dict "btn1" "Y" "icon1" "Teliop+" "btn2" "y" "icon2" "Teliop-" "count" "teleopAmpNotes"}}
          {{template "2goal" dict "btn1" "B" "icon1" "bank+" "btn2" "b" "icon2" "bank-" "count" "bankedAmpNotes"}}
        </div>
        <div class="goal-header">Coop Button
          <div id="coopertitionStatus" class="boolean robot-field" onclick="handleClick('coopButton');">
            <div class="value"></div>
          </div>
        </div>
        <div class="goal-header">Amp Button
          <div id="amplificationActive" class="boolean robot-field" onclick="handleClick('amplifyButton');">
            <div class="value"></div>
          </div>
        </div>
      </div>

      <div>
        
        
        <div id="ampAccumulatorDisable" class="boolean robot-field" onclick="handleClick('ampAccumulatorDisable');">
          <div class="value"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="column right">
    <div id="alliance">
      <div class="scoring-section">
        <div class="scoring-header">
          <div>&nbsp;</div>
          <div>Leave</div>
        </div>
        {{range $i := seq 3}}
          <div>
            <div class="team team-{{$i}} robot-field"></div>
            <div id="leaveStatus{{$i}}" class="boolean robot-field" onclick="handleClick('leave', {{$i}});">
              <div class="value"></div>
            </div>
          </div>
        {{end}}
      </div>
      <div id="stage">
        <svg id="stageGraphic" viewBox="0 4 100 90">
          <polygon points="5,5 95,5 50,78" fill="none" stroke="currentColor" stroke-width="0.2" />
          <text x="50" y="7.5" text-anchor="middle" font-size="2" fill="currentColor">Center</text>
          <text x="50" y="9.5" text-anchor="middle" font-size="2" fill="currentColor">Stage</text>
          <text x="30" y="38" text-anchor="middle" font-size="2" fill="currentColor">Stage</text>
          <text x="30" y="40" text-anchor="middle" font-size="2" fill="currentColor">Left</text>
          <text x="69" y="38" text-anchor="middle" font-size="2" fill="currentColor">Stage</text>
          <text x="69" y="40" text-anchor="middle" font-size="2" fill="currentColor">Right</text>
          <text x="50" y="15" text-anchor="middle" font-size="2" fill="currentColor">Park</text>
          <line x1="5" y1="85" x2="95" y2="85" stroke="currentColor" stroke-width="0.2" />
          <text x="50" y="87.5" text-anchor="middle" font-size="2" fill="currentColor">Alliance Wall</text>
        </svg>
        <div id="stageLeft" class="stage-side">{{template "stageSide" dict "index" 0}}</div>
        <div id="centerStage" class="stage-side">{{template "stageSide" dict "index" 1}}</div>
        <div id="stageRight" class="stage-side">{{template "stageSide" dict "index" 2}}</div>
        <div id="park" class="stage-side">
          <div class="stage-side-col">
            <div id="parkTeam1" class="team-1 boolean" onclick="handleClick('park', 1);"></div>
            <div id="parkTeam2" class="team-2 boolean" onclick="handleClick('park', 2);"></div>
            <div id="parkTeam3" class="team-3 boolean" onclick="handleClick('park', 3);"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="commitMatchScore">
  <button type="button" class="btn btn-primary" onclick="commitMatchScore();">
    Commit Final Match Score
  </button>
</div>
<div id="postMatchMessage">Waiting for the next match...</div>
{{end}}
{{define "head"}}
<link rel="manifest" href="/static/manifest/{{.Alliance}}_scoring.manifest">
<meta name="viewport" content="width=device-width, user-scalable=no">
<link href="/static/css/scoring_panel.css" rel="stylesheet">
{{end}}
{{define "script"}}
<script src="/static/js/match_timing.js"></script>
<script src="/static/js/scoring_panel.js"></script>
{{end}}
{{define "stageSide"}}
<div class="stage-side-col">
  <div id="stageSide{{.index}}Team1" class="team-1 boolean" onclick="handleClick('onStage', 1, {{.index}});"></div>
  <div id="stageSide{{.index}}Team2" class="team-2 boolean" onclick="handleClick('onStage', 2, {{.index}});"></div>
  <div id="stageSide{{.index}}Team3" class="team-3 boolean" onclick="handleClick('onStage', 3, {{.index}});"></div>
</div>
<div class="stage-side-col">
  <div id="stageSide{{.index}}Microphone" class="boolean" onclick="handleClick('microphone', 0, {{.index}});">Mic</div>
  <div id="stageSide{{.index}}Trap" class="boolean" onclick="handleClick('trap', 0, {{.index}});">Trap</div>
</div>
{{end}}
{{define "goaladd"}}
<div class="goal">
  <div class="number-button plus" onclick="handleClick('{{.plus}}');">
    <div class="shortcut">{{.plus}}</div>
    <div class="icon">
      {{.icon1}}
    </div>
    <div class="shortcut" style="opacity: 0;">{{.plus}}</div>
  </div>
</div>
{{end}}
{{define "goalsub"}}
<div class="goal">
  <div class="number-button minus" onclick="handleClick('{{.minus}}');">
    <div class="shortcut">{{.minus}}</div>
    <div class="icon">
      {{.icon1}}
    </div>
    <div class="shortcut" style="opacity: 0;">{{.minus}}</div>
  </div>
</div>
{{end}}



{{define "2goal"}}
<div class="goal">
  <div class="number-button btn1" onclick="handleClick('{{.btn1}}');">
    <div class="shortcut">{{.btn1}}</div>
    <div class="icon">
      {{.icon1}}
    </div>
    <div class="shortcut" style="opacity: 0;">{{.btn1}}</div>
  </div>
  <div id={{.count}}></div>
  <div class="number-button btn2" onclick="handleClick('{{.btn2}}');">
    <div class="shortcut">{{.btn2}}</div>
    <div class="icon">
      {{.icon2}}
    </div>
    <div class="shortcut" style="opacity: 0;">{{.minus}}</div>
  </div>
</div>
{{end}}